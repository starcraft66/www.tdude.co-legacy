(function(b){b.fn.jqMetroLoader=function(a){a=b.extend({opacity:!0,speed:500,size:20,delay:200,spacing:10,number:5,containerMargin:200,color:"#222"},a);this.each(function(){function i(){for(var c=0;c<a.number;c++){var d=f/2-c*a.size-c*a.spacing-a.containerMargin/3,e=a.opacity?0:1;b("#jqMetroLoader-container div:nth-child("+(c+1)+")").delay(a.delay*c).animate({left:d+"px",opacity:1},a.speed,function(){b(this).delay(g).animate({left:f+a.containerMargin+"px",opacity:e},a.speed)})}}function h(){i();b("#jqMetroLoader-container").animate({"margin-left":a.containerMargin+ "px"},j,function(){b("#jqMetroLoader-container").css("margin-left","0px");b("#jqMetroLoader-container div").css({left:-a.size-a.containerMargin+"px",opacity:a.opacity?0:1});h()})}var d=b(this),f=d.width(),e=d.height(),g=a.delay*a.number+100*a.number,j=a.number*a.delay+2*a.speed+g+50;(function(){d.css({overflow:"hidden"});d.append('<div id="jqMetroLoader-container"></div>');b("#jqMetroLoader-container").width(f+a.containerMargin).height(e).css({position:"relative"});for(var c=0;c<a.number;c++)b("#jqMetroLoader-container").append("<div>"), b("#jqMetroLoader-container div").css({height:a.size,width:a.size,opacity:a.opacity?0:1,position:"absolute",left:-a.size-a.containerMargin+"px",top:(e-a.size)/2+"px",background:a.color})})();h();b(window).resize(function(){f=d.width();e=d.height();b("#loader-container").width(f+a.containerMargin).height(e)})})}})(jQuery);